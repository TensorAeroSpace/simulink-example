# üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Simulink –º–æ–¥–µ–ª–∏ –≤ Python

> **–î–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π?**
> –î–ª—è –≤—Å–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ MATLAB Simulink, –Ω–∞–ø—Ä—è–º—É—é –≤ Python-–∫–æ–¥–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å MATLAB.

## üìñ –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä** —Ç–æ–≥–æ, –∫–∞–∫ –≤–∑—è—Ç—å –º–æ–¥–µ–ª—å –∏–∑ Simulink –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤ Python. 

### üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞—à–∞ –º–æ–¥–µ–ª—å?

–ù–∞—à–∞ Simulink –º–æ–¥–µ–ª—å ‚Äî —ç—Ç–æ **—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∏–Ω–∞–º–∏–∫–∏ –ª–µ—Ç–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞** (—Å–∞–º–æ–ª—ë—Ç–∞). –û–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ï–¥–∏–Ω–∏—Ü—ã |
|----------|----------|---------|
| `Wz` | –£–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ –æ—Å–∏ Z | —Ä–∞–¥/—Å |
| `theta_big` (Œò) | –£–≥–æ–ª —Ç–∞–Ω–≥–∞–∂–∞ (–Ω–∞–∫–ª–æ–Ω –Ω–æ—Å–∞ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑) | —Ä–∞–¥ |
| `H` | –í—ã—Å–æ—Ç–∞ –ø–æ–ª—ë—Ç–∞ | –º |
| `alpha` (Œ±) | –£–≥–æ–ª –∞—Ç–∞–∫–∏ (—É–≥–æ–ª –º–µ–∂–¥—É –∫—Ä—ã–ª–æ–º –∏ –ø–æ—Ç–æ–∫–æ–º –≤–æ–∑–¥—É—Ö–∞) | —Ä–∞–¥ |
| `theta_small` (Œ∏) | –£–≥–æ–ª —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ | —Ä–∞–¥ |

**–í—Ö–æ–¥–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä:** `refSignal` ‚Äî —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–∏–≥–Ω–∞–ª (–∂–µ–ª–∞–µ–º—ã–π —É–≥–æ–ª –∞—Ç–∞–∫–∏)

![Simulink –ú–æ–¥–µ–ª—å](model.png)

---

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç? (–ü—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Simulink   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚ñ∫   ‚îÇ  C-–∫–æ–¥ (.c/.h)   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚ñ∫   ‚îÇ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞  ‚îÇ
‚îÇ   –º–æ–¥–µ–ª—å    ‚îÇ Ctrl+B  ‚îÇ  (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è) ‚îÇ   gcc   ‚îÇ    (.so)    ‚îÇ
‚îÇ   (.slx)    ‚îÇ         ‚îÇ                  ‚îÇ         ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                            ‚îÇ
                                                            ‚ñº
                                                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                     ‚îÇ   Python    ‚îÇ
                                                     ‚îÇ  (ctypes)   ‚îÇ
                                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:

1. **Simulink –º–æ–¥–µ–ª—å (.slx)** ‚Äî –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã
2. **Ctrl+B** ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç C-–∫–æ–¥ –∏–∑ –º–æ–¥–µ–ª–∏
3. **gcc** ‚Äî –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç C-–∫–æ–¥ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (.so –Ω–∞ Linux/Mac, .dll –Ω–∞ Windows)
4. **Python + ctypes** ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ–ª–∏

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
simulink-example/
‚îÇ
‚îú‚îÄ‚îÄ üìÑ README.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ üìì example_your_sim.ipynb    # Jupyter notebook —Å –ø—Ä–∏–º–µ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ üìã requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python (pip install -r requirements.txt)
‚îú‚îÄ‚îÄ üìú LICENSE                   # MIT –ª–∏—Ü–µ–Ω–∑–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üé® model.slx                 # –ò—Å—Ö–æ–¥–Ω–∞—è Simulink –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ üñºÔ∏è model.png                 # –ö–∞—Ä—Ç–∏–Ω–∫–∞ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ üì¶ model.so                  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!)
‚îÇ
‚îú‚îÄ‚îÄ üêç rtwtypes.py               # Python-—Ç–∏–ø—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Simulink —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îî‚îÄ‚îÄ üìÇ model_ert_shrlib_rtw/     # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π C-–∫–æ–¥
    ‚îú‚îÄ‚îÄ model.c                  # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –º–æ–¥–µ–ª–∏ (–∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å—á—ë—Ç–∞)
    ‚îú‚îÄ‚îÄ model.h                  # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª (–æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö)
    ‚îî‚îÄ‚îÄ ...                      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|-----------|--------|-------------|
| **Python** | 3.8+ | ‚úÖ –î–∞ |
| matplotlib | 3.5+ | ‚úÖ –î–∞ |
| Jupyter Notebook | 6.4+ | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| GCC (–¥–ª—è –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏) | –ª—é–±–∞—è | ‚ö™ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

> üí° **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è Python: 3.10+**
> 
> –ü—Ä–æ–µ–∫—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ Python 3.8, 3.9, 3.10, 3.11, 3.12

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/your-username/simulink-example.git
cd simulink-example

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ `example_your_sim.ipynb` –≤ Jupyter Notebook
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —è—á–µ–π–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∏ –ª–µ—Ç–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞!

---

## üìö –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Simulink –º–æ–¥–µ–ª–∏

–í –≤–∞—à–µ–π Simulink –º–æ–¥–µ–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ö–æ–¥–æ–≤ –∏ –≤—ã—Ö–æ–¥–æ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     –í–∞—à–∞ Simulink –º–æ–¥–µ–ª—å                    ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ   [In1] ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ [Out1]       ‚îÇ
‚îÇ   (–≤—Ö–æ–¥)       ‚îÇ  –í–∞—à–∞ –ª–æ–≥–∏–∫–∞/       ‚îÇ        (–≤—ã—Ö–æ–¥ 1)    ‚îÇ
‚îÇ                ‚îÇ  –ø–µ—Ä–µ–¥–∞—Ç–æ—á–Ω—ã–µ       ‚îÇ                      ‚îÇ
‚îÇ                ‚îÇ  —Ñ—É–Ω–∫—Ü–∏–∏/–±–ª–æ–∫–∏      ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ [Out2]       ‚îÇ
‚îÇ                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        (–≤—ã—Ö–æ–¥ 2)    ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–í–∞–∂–Ω–æ:** –ò–º–µ–Ω–Ω–æ –±–ª–æ–∫–∏ `In1` –∏ `Out1` —Å—Ç–∞–Ω—É—Ç –≤—Ö–æ–¥–Ω—ã–º–∏ –∏ –≤—ã—Ö–æ–¥–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏!

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏: **Model Settings** ‚Üí **Code Generation**
2. –ù–∞–π–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä **System target file**
3. –í—ã–±–µ—Ä–∏—Ç–µ: `ert_shrlib.tlc`

   > üí° `ert_shrlib` –æ–∑–Ω–∞—á–∞–µ—Ç "Embedded Real-Time Shared Library" ‚Äî 
   > —ç—Ç–æ —à–∞–±–ª–æ–Ω –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.

### –®–∞–≥ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è C-–∫–æ–¥–∞

–ù–∞–∂–º–∏—Ç–µ `Ctrl+B` (–∏–ª–∏ –º–µ–Ω—é **Code** ‚Üí **C/C++ Code** ‚Üí **Build Model**)

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–æ—è–≤–∏—Ç—Å—è –ø–∞–ø–∫–∞ `MODEL_NAME_ert_shrlib_rtw/` —Å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–¥–æ–º.

### –®–∞–≥ 4: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å –∫–æ–¥–æ–º –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –î–ª—è Linux/Mac:
cd MODEL_NAME_ert_shrlib_rtw
gcc -shared -o model.so -fPIC *.c

# –î–ª—è Windows:
# gcc -shared -o model.dll *.c
```

> üìù **–ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —Ñ–ª–∞–≥–∏?**
> - `-shared` ‚Äî —Å–æ–∑–¥–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
> - `-o model.so` ‚Äî –∏–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
> - `-fPIC` ‚Äî Position Independent Code (–Ω—É–∂–Ω–æ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫)
> - `*.c` ‚Äî —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ .c —Ñ–∞–π–ª—ã

### –®–∞–≥ 5: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ Python

–û—Ç–∫—Ä–æ–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `MODEL_NAME.h` –∏ –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `ExtU_` –∏ `ExtY_`:

```c
/* –í —Ñ–∞–π–ª–µ model.h –Ω–∞–π–¥–∏—Ç–µ: */

/* External inputs - —ç—Ç–æ –í–•–û–î–´ –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏ */
typedef struct {
  real_T refSignal;     /* '<Root>/refSignal' */
} ExtU_model_T;

/* External outputs - —ç—Ç–æ –í–´–•–û–î–´ –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏ */
typedef struct {
  real_T Wz;            /* '<Root>/Wz' */
  real_T theta_big;     /* '<Root>/theta_big' */
  real_T H;             /* '<Root>/H' */
  real_T alpha;         /* '<Root>/alpha' */
  real_T theta_small;   /* '<Root>/theta_small' */
} ExtY_model_T;
```

–¢–µ–ø–µ—Ä—å –æ–ø–∏—à–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Python:

```python
import ctypes
from rtwtypes import *  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–∏–ø—ã Simulink

# –í—ã—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—á—Ç–æ –º–æ–¥–µ–ª—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç)
class ExtY(ctypes.Structure):
    _fields_ = [
        ("Wz", real_T),          # –£–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
        ("theta_big", real_T),   # –£–≥–æ–ª —Ç–∞–Ω–≥–∞–∂–∞
        ("H", real_T),           # –í—ã—Å–æ—Ç–∞
        ("alpha", real_T),       # –£–≥–æ–ª –∞—Ç–∞–∫–∏
        ("theta_small", real_T), # –£–≥–æ–ª —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
    ]

# –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—á—Ç–æ –≤—ã –∑–∞–¥–∞—ë—Ç–µ –º–æ–¥–µ–ª–∏)
class ExtU(ctypes.Structure):
    _fields_ = [
        ("ref_signal", real_T),  # –£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–∏–≥–Ω–∞–ª
    ]
```

> ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ `_fields_` –¥–æ–ª–∂–µ–Ω –¢–û–ß–ù–û —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–æ—Ä—è–¥–∫–æ–º –≤ C-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ!

### –®–∞–≥ 6: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏

```python
import ctypes
import os

# 1. –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
dll = ctypes.cdll.LoadLibrary(os.path.abspath("model.so"))

# 2. –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –≤—Ö–æ–¥–∞–º –∏ –≤—ã—Ö–æ–¥–∞–º
X = ExtU.in_dll(dll, 'model_U')  # –í—Ö–æ–¥—ã
Y = ExtY.in_dll(dll, 'model_Y')  # –í—ã—Ö–æ–¥—ã

# 3. –ü–æ–ª—É—á–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ–ª–∏
model_initialize = dll.model_initialize  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
model_step = dll.model_step              # –û–¥–∏–Ω —à–∞–≥ —Ä–∞—Å—á—ë—Ç–∞
model_terminate = dll.model_terminate    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

# 4. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏–º—É–ª—è—Ü–∏—é
model_initialize()  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥–µ–ª—å

results = []
for step in range(1000):
    X.ref_signal = -0.1        # –ó–∞–¥–∞—ë–º –≤—Ö–æ–¥
    model_step()               # –î–µ–ª–∞–µ–º —à–∞–≥ —Å–∏–º—É–ª—è—Ü–∏–∏
    results.append(Y.Wz)       # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã—Ö–æ–¥

model_terminate()  # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º —Ä–µ—Å—É—Ä—Å—ã
```

---

## üîë –¢—Ä–∏ –≥–ª–∞–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ–ª–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å |
|---------|----------|----------------|
| `model_initialize()` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ | **–û–¥–∏–Ω —Ä–∞–∑** –≤ –Ω–∞—á–∞–ª–µ |
| `model_step()` | –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —à–∞–≥ –º–æ–¥–µ–ª–∏ (dt —Å–µ–∫—É–Ω–¥) | **–ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ** —Å–∏–º—É–ª—è—Ü–∏–∏ |
| `model_terminate()` | –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã | **–û–¥–∏–Ω —Ä–∞–∑** –≤ –∫–æ–Ω—Ü–µ |

> üí° **–®–∞–≥ –≤—Ä–µ–º–µ–Ω–∏ (dt)** –∑–∞–¥–∞—ë—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Simulink –º–æ–¥–µ–ª–∏. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ dt = 0.1 —Å–µ–∫—É–Ω–¥—ã.

---

## üìä –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤: Simulink ‚Üí C ‚Üí Python

| Simulink/C —Ç–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | Python (ctypes) |
|----------------|----------|-----------------|
| `real_T` / `real64_T` | 64-–±–∏—Ç —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π | `ctypes.c_double` |
| `real32_T` | 32-–±–∏—Ç —á–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π | `ctypes.c_float` |
| `int32_T` | 32-–±–∏—Ç —Ü–µ–ª–æ–µ —Å–æ –∑–Ω–∞–∫–æ–º | `ctypes.c_int` |
| `uint32_T` | 32-–±–∏—Ç —Ü–µ–ª–æ–µ –±–µ–∑ –∑–Ω–∞–∫–∞ | `ctypes.c_uint` |
| `int16_T` | 16-–±–∏—Ç —Ü–µ–ª–æ–µ —Å–æ –∑–Ω–∞–∫–æ–º | `ctypes.c_short` |
| `boolean_T` | –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ | `ctypes.c_ubyte` |

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `rtwtypes.py`.

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)

### –ü–æ—á–µ–º—É –º–Ω–µ –Ω—É–∂–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Python, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å –≤ C?

Python –∏ C ‚Äî —Ä–∞–∑–Ω—ã–µ —è–∑—ã–∫–∏. Python –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "–ø–æ–Ω—è—Ç—å" —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–∑ C-–∫–æ–¥–∞. –ú–æ–¥—É–ª—å `ctypes` –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º "–Ω–∞—É—á–∏—Ç—å" Python —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–∞–º—è—Ç—å—é —Ç–∞–∫ –∂–µ, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç C. –ü–æ—ç—Ç–æ–º—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∑–∞–Ω–æ–≤–æ.

### –ß—Ç–æ –µ—Å–ª–∏ —É –º–µ–Ω—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤?

–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –ø–æ–ª–µ–π –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `ExtU` –∏ `ExtY`. –ì–ª–∞–≤–Ω–æ–µ ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∫–∞–∫ –≤ `.h` —Ñ–∞–π–ª–µ.

### –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω—è—Ç—å –≤—Ö–æ–¥—ã –º–µ–∂–¥—É —à–∞–≥–∞–º–∏?

–î–∞! –ò–º–µ–Ω–Ω–æ —Ç–∞–∫ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—è. –í—ã –º–æ–∂–µ—Ç–µ –º–µ–Ω—è—Ç—å `X.ref_signal` –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∏–∑–º–µ–Ω—è—é—â–µ–≥–æ—Å—è —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è.

### –ü–æ—á–µ–º—É `.so` —Ñ–∞–π–ª –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows?

–ù–∞ Windows –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–π–ª—ã `.dll`. –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é:
```bash
gcc -shared -o model.dll *.c
```

### –ù—É–∂–µ–Ω –ª–∏ –º–Ω–µ MATLAB –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏?

**–ù–µ—Ç!** –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ `.so`/`.dll` —Ñ–∞–π–ª, MATLAB –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω. Python —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –Ω–∞–ø—Ä—è–º—É—é.

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ —Ö–æ—Ç–∏—Ç–µ!

---

## ü§ù –í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏!
